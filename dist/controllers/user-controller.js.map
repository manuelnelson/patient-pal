{"version":3,"sources":["../../src/server/controllers/user-controller.js"],"names":["load","req","res","next","id","get","then","user","catch","e","json","create","console","log","body","username","email","save","savedUser","update","list","query","limit","skip","users","remove","deletedUser"],"mappings":";;;;;;AAAA;;;;;;AAEA;;;AAGA,SAASA,IAAT,CAAcC,GAAd,EAAmBC,GAAnB,EAAwBC,IAAxB,EAA8BC,EAA9B,EAAkC;AAChC,iBAAKC,GAAL,CAASD,EAAT,EACGE,IADH,CACQ,UAACC,IAAD,EAAU;AACdN,QAAIM,IAAJ,GAAWA,IAAX;AACA,WAAOJ,MAAP;AACD,GAJH,EAKGK,KALH,CAKS;AAAA,WAAKL,KAAKM,CAAL,CAAL;AAAA,GALT;AAMD;;AAED;;;;AAIA,SAASJ,GAAT,CAAaJ,GAAb,EAAkBC,GAAlB,EAAuB;AACrB,SAAOA,IAAIQ,IAAJ,CAAST,IAAIM,IAAb,CAAP;AACD;;AAED;;;;;;AAMA,SAASI,MAAT,CAAgBV,GAAhB,EAAqBC,GAArB,EAA0BC,IAA1B,EAAgC;AAC5BS,UAAQC,GAAR,CAAYZ,IAAIa,IAAhB;AACF,MAAMP,OAAO,mBAAS;AACpBQ,cAAUd,IAAIa,IAAJ,CAASC,QADC;AAEpBC,WAAOf,IAAIa,IAAJ,CAASE;AAFI,GAAT,CAAb;;AAKAT,OAAKU,IAAL,GACGX,IADH,CACQ;AAAA,WAAaJ,IAAIQ,IAAJ,CAASQ,SAAT,CAAb;AAAA,GADR,EAEGV,KAFH,CAES;AAAA,WAAKL,KAAKM,CAAL,CAAL;AAAA,GAFT;AAGD;;AAED;;;;;;AAMA,SAASU,MAAT,CAAgBlB,GAAhB,EAAqBC,GAArB,EAA0BC,IAA1B,EAAgC;AAC9B,MAAMI,OAAON,IAAIM,IAAjB;AACAA,OAAKQ,QAAL,GAAgBd,IAAIa,IAAJ,CAASC,QAAzB;AACAR,OAAKS,KAAL,GAAaf,IAAIa,IAAJ,CAASE,KAAtB;;AAEAT,OAAKU,IAAL,GACGX,IADH,CACQ;AAAA,WAAaJ,IAAIQ,IAAJ,CAASQ,SAAT,CAAb;AAAA,GADR,EAEGV,KAFH,CAES;AAAA,WAAKL,KAAKM,CAAL,CAAL;AAAA,GAFT;AAGD;;AAED;;;;;;AAMA,SAASW,IAAT,CAAcnB,GAAd,EAAmBC,GAAnB,EAAwBC,IAAxB,EAA8B;AAAA,mBACKF,IAAIoB,KADT;AAAA,oCACpBC,KADoB;AAAA,MACpBA,KADoB,oCACZ,EADY;AAAA,mCACRC,IADQ;AAAA,MACRA,IADQ,mCACD,CADC;;AAE5B,iBAAKH,IAAL,CAAU,EAAEE,YAAF,EAASC,UAAT,EAAV,EACGjB,IADH,CACQ;AAAA,WAASJ,IAAIQ,IAAJ,CAASc,KAAT,CAAT;AAAA,GADR,EAEGhB,KAFH,CAES;AAAA,WAAKL,KAAKM,CAAL,CAAL;AAAA,GAFT;AAGD;;AAED;;;;AAIA,SAASgB,MAAT,CAAgBxB,GAAhB,EAAqBC,GAArB,EAA0BC,IAA1B,EAAgC;AAC9B,MAAMI,OAAON,IAAIM,IAAjB;AACAA,OAAKkB,MAAL,GACGnB,IADH,CACQ;AAAA,WAAeJ,IAAIQ,IAAJ,CAASgB,WAAT,CAAf;AAAA,GADR,EAEGlB,KAFH,CAES;AAAA,WAAKL,KAAKM,CAAL,CAAL;AAAA,GAFT;AAGD;;kBAEc,EAAET,UAAF,EAAQK,QAAR,EAAaM,cAAb,EAAqBQ,cAArB,EAA6BC,UAA7B,EAAmCK,cAAnC,E","file":"user-controller.js","sourcesContent":["import User from '../models/user';\r\n\r\n/**\r\n * Load user and append to req.\r\n */\r\nfunction load(req, res, next, id) {\r\n  User.get(id)\r\n    .then((user) => {\r\n      req.user = user;\r\n      return next();\r\n    })\r\n    .catch(e => next(e));\r\n}\r\n\r\n/**\r\n * Get user\r\n * @returns {User}\r\n */\r\nfunction get(req, res) {\r\n  return res.json(req.user);\r\n}\r\n\r\n/**\r\n * Create new user\r\n * @property {string} req.body.username - The username of user.\r\n * @property {string} req.body.mobileNumber - The mobileNumber of user.\r\n * @returns {User}\r\n */\r\nfunction create(req, res, next) {\r\n    console.log(req.body);\r\n  const user = new User({\r\n    username: req.body.username,\r\n    email: req.body.email\r\n  });\r\n\r\n  user.save()\r\n    .then(savedUser => res.json(savedUser))\r\n    .catch(e => next(e));\r\n}\r\n\r\n/**\r\n * Update existing user\r\n * @property {string} req.body.username - The username of user.\r\n * @property {string} req.body.email - The email of user.\r\n * @returns {User}\r\n */\r\nfunction update(req, res, next) {\r\n  const user = req.user;\r\n  user.username = req.body.username;\r\n  user.email = req.body.email;\r\n\r\n  user.save()\r\n    .then(savedUser => res.json(savedUser))\r\n    .catch(e => next(e));\r\n}\r\n\r\n/**\r\n * Get user list.\r\n * @property {number} req.query.skip - Number of users to be skipped.\r\n * @property {number} req.query.limit - Limit number of users to be returned.\r\n * @returns {User[]}\r\n */\r\nfunction list(req, res, next) {\r\n  const { limit = 50, skip = 0 } = req.query;\r\n  User.list({ limit, skip })\r\n    .then(users => res.json(users))\r\n    .catch(e => next(e));\r\n}\r\n\r\n/**\r\n * Delete user.\r\n * @returns {User}\r\n */\r\nfunction remove(req, res, next) {\r\n  const user = req.user;\r\n  user.remove()\r\n    .then(deletedUser => res.json(deletedUser))\r\n    .catch(e => next(e));\r\n}\r\n\r\nexport default { load, get, create, update, list, remove };\r\n"]}